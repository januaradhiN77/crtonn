    <!DOCTYPE html>
    <html lang="en">

    <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=Edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
      <link href='https://fonts.googleapis.com/css?family=Quicksand' rel='stylesheet'>
      <link href='https://fonts.googleapis.com/css?family=Zen Maru Gothic' rel='stylesheet'>
      <link href='https://fonts.googleapis.com/css?family=Barlow Condensed' rel='stylesheet'>
      <link href='https://fonts.googleapis.com/css?family=Inter' rel='stylesheet'>
      <link rel="stylesheet" href="style.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.3.67/css/materialdesignicons.min.css">
      <title>Cartoonn</title>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6388791681619453"
        crossorigin="anonymous"></script>
      <style>
        /* Custom Styles for the Favorite Button */
        .favorite-button {
          background-color: transparent;
          border: none;
          cursor: pointer;
        }

        .favorite-button .mdi-bookmark-outline {
          font-size: 30px;
          color: #FFD700;
          /* Warna kuning */
        }

        .keterangan-videos .favorite-button .mdi mdi-bookmark-outline:hover {
          color: #FFAC33;
          /* Warna kuning terang saat hover */
        }

        #episodeContainer {
          margin-top: 20px;
        }

        /* Style for the Movie Terkait Container */
        #movieTerkaitContainer {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          display: none;
          /* Initially hidden */
          background-color: #1B21305C;
          /* Black overlay with 50% opacity */
          z-index: 9999999999999999999999999999;
          /* Ensure it's on top */
        }

        #movieTerkaitContainer .inner-container {
          position: absolute;
          top: 50%;
          left: 50%;

          transform: translate(-50%, -50%);
          background-color: #191C23;
          /* Black background */
          padding: 20px;
          border-radius: 10px;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          color: #fff;
          width: 80%;
          height: 550px;
        }

        #movieTerkaitContainer .close-button {
          background-color: transparent;





          border: 0px solid transparent;
          /* Atur warna dan ukuran garis sesuai kebutuhan */
          color: transparent;
          /* Atur warna teks sesuai kebutuhan */
          padding: 0px 0px;
          /* Atur ukuran padding sesuai kebutuhan */
          text-align: left;
          margin: 0;
          border-radius: 5px;
          /* Atur radius border sesuai kebutuhan */
          width: 100px;

          display: flex;
          gap: 10px;
          height: 50px;
          font-size: 20px;
          font-weight: 700;
          font-family: 'Zen Maru Gothic';
          justify-content: center;
          align-items: center;
          border-radius: 10px 10px 10px 10px;
          background: #FFB821;
          color: #fff;
        }
      </style>
    </head>

    <body>
      <header>
        <div class="header_app">
          <div class="header_logo">
            <button class="buttongoweb" onclick="goToWebsite('index.html')"><span class="mdi mdi-arrow-left"></span>
            </button>
            <span style="font-size: 15px; font-weight: 700;" class="title"></span>
          </div>
          <div style="margin-left: auto; display: flex; justify-content: center; align-items: center;">
            <button id="favoriteButton" class="buttongoweb" ontouchstart="addOverlay(event)"
              ontouchend="removeOverlay(event)" ontouchcancel="removeOverlay(event)">
              <span class="mdi mdi-bookmark-outline" style="font-size: 40px;color: #FFC759;margin-right: 23px;"></span>
              <div style="margin-left: auto;">
                <div class="overlay" style="width: 50px;height: 50px;margin-left: 84%;margin-top: 4px;border-radius: 50%;">
                </div>
              </div>
            </button>
          </div>
        </div>
      </header>
      <nav>
        <div class="navbar-container">
          <button class="buttongoweb" onclick="goToLink('index.html')">
            <div class="navbar-box" ontouchstart="addOverlayNavbar(event)" ontouchend="removeOverlayNavbar(event)"
              ontouchcancel="removeOverlayNavbar(event)">
              <div class="overlay-navbar"></div>
              <span class="mdi mdi-home active"></span>
              <h1>Home</h1>
            </div>
          </button>
          <button class="buttongoweb" onclick="goToLink('cari.html')">
            <div class="navbar-box" ontouchstart="addOverlayNavbar(event)" ontouchend="removeOverlayNavbar(event)"
              ontouchcancel="removeOverlayNavbar(event)">
              <div class="overlay-navbar"></div>
              <span class="mdi mdi-movie"></span>
              <h1>Movie</h1>
            </div>
          </button>
          <button class="buttongoweb" onclick="goToLink('history.html')">
            <div class="navbar-box" ontouchstart="addOverlayNavbar(event)" ontouchend="removeOverlayNavbar(event)"
              ontouchcancel="removeOverlayNavbar(event)">
              <div class="overlay-navbar"></div>
              <span class="mdi mdi-history"></span>
              <h1>History</h1>
            </div>
          </button>
          <button class="buttongoweb" onclick="goToLink('favorit.html')">
            <div class="navbar-box" ontouchstart="addOverlayNavbar(event)" ontouchend="removeOverlayNavbar(event)"
              ontouchcancel="removeOverlayNavbar(event)">
              <div class="overlay-navbar"></div>
              <span class="mdi mdi-bookmark"></span>
              <h1>Favorit</h1>
            </div>
          </button>
          <button class="buttongoweb" onclick="goToLink('lainnya.html')">
            <div class="navbar-box" ontouchstart="addOverlayNavbar(event)" ontouchend="removeOverlayNavbar(event)"
              ontouchcancel="removeOverlayNavbar(event)">
              <div class="overlay-navbar"></div>
              <span class="mdi mdi-information"></span>
              <h1>About</h1>
            </div>
          </button>
        </div>
      </nav>
      <section
        style="margin-top: 690px;margin-left: 220px; position: fixed;z-index: 99999999999999999999999; background: transparent;">
        <button class="buttongoweb" onclick="showMovieTerkait()">
          <div>
            <div
              style="display: flex; justify-content: center; align-items: center;text-align: center;background: transparent;">
              <h1
                style="z-index: 9999999; position: absolute;text-align: center; font-size: 20px; color: white; font-family: 'Zen Maru Gothic';">
                Movie Terkait</h1>
              <img src="asset/movieterkait.png"
                style="width: 150px; height: 50px; object-fit: cover;border-radius: 7px; opacity: 1;">
              <div class="image-overlay-animasi-terkait"></div>
            </div>
          </div>
        </button>
      </section>
      <section class="header-image-v">
        <div class="header-image">
          <div class="image-videos">
            <img id="bgimg" src="">
            <div class="image-overlay-videos"></div>
          </div>
        </div>
      </section>
      <section class="cartoon-detail">
        <div class="cartoon-detail-cont">
          <h1 class="title"></h1>
          <div style="display: flex; gap: 6px; align-items: center;width: 100%;">
            <span id="terjemah"></span>
            <span style="color:#A1A1A1C9; font-size: 10px;">â€¢</span>
            <span class="durasi" id="duration"></span>
          </div>
          <div class="keterangan-videos">
            <span style="color: #FFC759;" class="mdi mdi-star"></span>
            <span id="rating"></span>
            <div class="garis"></div>
            <span id="studio" style="font-weight: 300;"></span>
            <div class="garis"></div>
            <span id="rilis" style="font-weight: 300;"></span>
            <div class="garis"></div>
            <span id="type" style="font-weight: 300;"></span>
          </div>
          <div class="genre-v">
            <div class="genre-videos">
              <h1 id="g1"></h1>
            </div>
            <div class="genre-videos">
              <h1 id="g2"></h1>
            </div>
            <div class="genre-videos">
              <h1 id="g3"></h1>
            </div>
          </div>
          <div class="sinopsis">
            <span id="description"></span>
          </div>
          <h1 style="margin-top: 30px; font-size: 25px;">Official Trailer</h1>
          <div class="trailer-iframe"
            style="display:flex;justify-content: center;width:90%;flex-direction: column;margin-top:10px;">
            <iframe src="asset/cplus_logo.png" id="trailer" allowfullscreen frameborder="0"
              style="width:115%;height:210px;border-radius: 20px;box-shadow: 0 0 6px #FFFFFF6E;"></iframe>
          </div>
          <h1 id="aktorTitle" style="margin-top: 30px; font-size: 33px;"></h1>
          <div id="moviesContainer" class="movies-container"
            style="height: auto; width: 103%; background: transparent;margin-top: -20px;">
            <div class="movies" style="background: transparent;" id="aktorContainer">
            </div>
          </div>
          <div style="display:flex; width : 100%; text-align: center;margin-top: 30px; align-items: center;">
            <h1 style=" font-size: 28px;font-family: 'Zen Maru Gothic';z-index: 100;" id="episodeCount"></h1>
            <button id="sortButton" onclick="sortEpisodes()" class="buttongoweb"
              style="transform: scaleX(-1);margin-left: auto;background: #171C28; margin-right: -5px; width: 50px;text-align:center;height: 40px;"><span
                style="color:white; font-size: 38px;  " class="mdi mdi-sort-variant"></span>
            </button>
          </div>
          <div class="button-nonton" id="episodeContainer" style="z-index: 100;">
            <span id="episodeTitle"></span>
          </div>
        </div>
        <div class="header-movies-text" style="justify-content: center; ">
          <h1 style="font-size: 15px; color: gray;margin-top: 30px">Anda sudah mencapai akhir</h1>
        </div>
      </section>
      <div class="batas"></div>
      <div class="batas"></div>
      <div id="movieTerkaitContainer">
        <div class="inner-container">
          <h1 style="font-family: 'Zen Maru Gothic'; margin-bottom: auto;">Movie Terkait</h1>
          <div
            style="height: 380px; overflow-y:auto;width: 100%;display: flex;flex-direction: column; margin-bottom: auto;scroll-behavior: smooth;">
            <div id="relatedMovies"
              style="display: flex; width: 100%; margin-top: 15px; flex-wrap: wrap; gap: 10px; padding-bottom: 10px;justify-content: left; align-items: center;">

            </div>
          </div>
          <button class="close-button" onclick="closeMovieTerkait()">Tutup</button>
        </div>

      </div>
      <script src="cookie.js"></script>
      <script src="movie_terkait.js"></script>
      <script src="main.js"></script>
      <script src="data_video.js"></script>
      <script src="theme-toggle.js"></script>
      <script src="main.js"></script>
      <script src="data_video.js"></script>
      <script src="theme-toggle.js"></script>
      <script>
        document.addEventListener('DOMContentLoaded', function () {
          // Ambil parameter animasi dari URL
          const urlParams = new URLSearchParams(window.location.search);
          const animation = urlParams.get('animation');
      
          // Ambil data film dari data_video.js
          const filmData = data[animation];
      
          // Simpan informasi film terakhir yang ditonton di localStorage
          localStorage.setItem('lastWatched', JSON.stringify({
            title: filmData.title,
            img: filmData.bgimg,
            animation: animation
          }));
      
          // Tambahkan event listener untuk tombol favorit
          const favoriteButton = document.getElementById('favoriteButton');
          const favoriteData = {
            title: filmData.title,
            img: filmData.bgimg,
            url: window.location.href,
            terjemah: filmData.terjemah,
            duration: filmData.duration,
            rating: filmData.rating,
            studio: filmData.studio,
            rilis: filmData.rilis,
            type: filmData.type,
            genres: [filmData.gendre1, filmData.gendre2, filmData.gendre3],
            description: filmData.description,
            trailer: filmData.trailer
          };
      
          // Check apakah film sudah di dalam daftar favorit
          let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
          let isFavorited = favorites.some(fav => fav.url === window.location.href);
      
          // Update tampilan tombol berdasarkan status favorit
          if (isFavorited) {
            favoriteButton.classList.add('favorited');
            favoriteButton.querySelector('span').classList.replace('mdi-bookmark-outline', 'mdi-bookmark');
          }
      
          // Tambahkan event listener untuk tombol favorit
          favoriteButton.addEventListener('click', function () {
            let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
            let isFavorited = favorites.some(fav => fav.url === window.location.href);
      
            if (isFavorited) {
              // Hapus dari daftar favorit
              favorites = favorites.filter(fav => fav.url !== window.location.href);
              localStorage.setItem('favorites', JSON.stringify(favorites));
              favoriteButton.classList.remove('favorited');
              favoriteButton.querySelector('span').classList.replace('mdi-bookmark', 'mdi-bookmark-outline');
              alert('Dihapus dari Favorit');
            } else {
              // Tambahkan ke daftar favorit
              favorites.push(favoriteData);
              localStorage.setItem('favorites', JSON.stringify(favorites));
              favoriteButton.classList.add('favorited');
              favoriteButton.querySelector('span').classList.replace('mdi-bookmark-outline', 'mdi-bookmark');
              alert('Ditambahkan ke Favorit');
            }
          });
      
          // Tambahkan event listener untuk tombol urut episode
          const sortButton = document.getElementById('sortButton');
          sortButton.addEventListener('click', function () {
            sortEpisodes(filmData.episodes);
          });
      
          // Tambahkan kode untuk menampilkan episode
          displayEpisodes(filmData.episodes);
      
          // Tampilkan film terkait
          displayRelatedMovies(filmData.relatedMovies);
        });
      
        let isAscending = true; // Untuk melacak urutan episode saat ini
      
        function sortEpisodes(episodes) {
          // Balik urutan episode
          episodes.reverse();
          isAscending = !isAscending; // Ubah status urutan
      
          // Hapus episode yang ada
          const episodeContainer = document.getElementById("episodeContainer");
          episodeContainer.innerHTML = '';
      
          // Tambahkan episode yang sudah diurutkan
          displayEpisodes(episodes);
        }
      
        // Fungsi untuk menampilkan episode
        function displayEpisodes(episodes) {
          const episodeContainer = document.getElementById("episodeContainer");
          episodeContainer.innerHTML = ''; // Kosongkan kontainer episode sebelum menambahkan yang baru
      
          episodes.forEach((episode) => {
            const episodeButton = document.createElement("button");
            const iconElement = document.createElement("span");
            iconElement.classList.add("mdi", "mdi-play-circle");
            iconElement.style.fontSize = "30px";
      
            episodeButton.textContent = episode.episodeTitle;
      
            episodeButton.addEventListener("click", function () {
              const episodeUrl = encodeURIComponent(episode.episodeUrl);
              const episodeJudul = encodeURIComponent(episode.episodeJudul);
              const episodeTitle = encodeURIComponent(episode.episodeTitle);
              const description = encodeURIComponent(episode.description);
              const episodeImg = encodeURIComponent(data[animation].bgimg);
              const episodeStudio = encodeURIComponent(data[animation].studio);
              const episodeBintang = encodeURIComponent(data[animation].rating);
              const episodeDurasi = encodeURIComponent(episode.duration);
      
              // Simpan riwayat tontonan ke localStorage
              let history = JSON.parse(localStorage.getItem('watchHistory')) || [];
              history.push({
                title: episode.episodeJudul,
                img: data[animation].bgimg,
                durasi: episode.duration,
                studio: data[animation].studio,
                animation: animation,
                bintang: data[animation].rating,
                description: episode.description,
                episode: episode.episodeTitle
              });
              localStorage.setItem('watchHistory', JSON.stringify(history));
      
              window.location.href = `video_testing.html?episodeUrl=${episodeUrl}&episodeJudul=${episodeJudul}&description=${description}&episodeImg=${episodeImg}&episodeTitle=${episodeTitle}&episodeStudio=${episodeStudio}&episodeBintang=${episodeBintang}&episodeDurasi=${episodeDurasi}`;
            });
      
            episodeButton.insertBefore(iconElement, episodeButton.firstChild);
            episodeContainer.appendChild(episodeButton); 
          });
      
          const episodeCountElement = document.getElementById("episodeCount");
          episodeCountElement.textContent = `Mulai Menonton (${episodes.length})`;
        }
      
        function displayRelatedMovies(relatedMovies) {
          const relatedMoviesContainer = document.getElementById("relatedMovies");
          relatedMoviesContainer.innerHTML = '';
          if (relatedMovies.length === 0) {
            const noRelatedMoviesMessage = document.createElement("h1");
            noRelatedMoviesMessage.textContent = "Tidak ada movie terkait";
      
            noRelatedMoviesMessage.style.textAlign = "center"; 
            noRelatedMoviesMessage.style.fontSize = "18px"; 
            noRelatedMoviesMessage.style.color = "#ffffff"; 
            noRelatedMoviesMessage.style.marginTop = "20px"; 
            noRelatedMoviesMessage.style.marginBottom = "20px"; 
            relatedMoviesContainer.appendChild(noRelatedMoviesMessage);
          } else {
            relatedMovies.forEach(movieKey => {
              if (data.hasOwnProperty(movieKey)) {
                const movie = data[movieKey];
      
                const movieButton = document.createElement("button");
                movieButton.classList.add("buttongoweb");
                movieButton.addEventListener("click", function () {
                  window.location.href = `videos_detail.html?animation=${movieKey}`;
                });
      
                const movieDiv = document.createElement("div");
                movieDiv.classList.add("data-item");
      
                const movieBox = document.createElement("div");
                movieBox.classList.add("movies-box", "skeleton");
      
                const movieImg = document.createElement("img");
                movieImg.src = movie.bgimg;
                movieImg.alt = movie.title;
      
                const imageOverlay = document.createElement("div");
                imageOverlay.classList.add("image-overlay");
      
                const overlay = document.createElement("div");
                overlay.classList.add("overlay");
      
                const judulMovies = document.createElement("div");
                judulMovies.classList.add("judul-movies", "skeleton");
      
                const movieTitle = document.createElement("h1");
                movieTitle.textContent = movie.title;
      
                judulMovies.appendChild(movieTitle);
      
                movieBox.appendChild(movieImg);
                movieBox.appendChild(imageOverlay);
                movieBox.appendChild(overlay);
                movieBox.appendChild(judulMovies);
      
                movieDiv.appendChild(movieBox);
      
                movieButton.appendChild(movieDiv);
                relatedMoviesContainer.appendChild(movieButton);
              }
            });
          }
        }
      </script>
    </body>

    </html>